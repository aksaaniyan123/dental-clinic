(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+GZi":function(e,t,a){},"12GJ":function(e,t,a){"use strict";var n=a("mj2O"),r=a.n(n),c=a("7SM1"),i=a("nJ3u"),o=a("efbE"),s=function recordConsent(e,t){return o.f.post("/end_users/".concat(e,"/consent"),{consentId:"has_consent",message:t})},l=a("Ztgx"),u=a("NJA7"),d=a("lE29"),m=a("Vk0e"),f=a("qixE"),g=a("SFoa"),b=a("qwiD"),p=a("LVcX"),O=a("ERkP"),j=a.n(O),v=a("uDfI"),E=a("SWQ0"),h=a("gG69"),w=a("0lfv"),y=a("Nlet"),N=a("wNJw"),k=a("4c+F"),C=(a("sZBt"),function DeclinedConsent(e){var t=e.consentMessage,a=e.canRetryConsent,n=e.onRetryConsentClicked,r=void 0===n?function(){}:n,c=e.copyStyle,i=void 0===c?{}:c;return j.a.createElement("div",{className:"drift-widget-greeting-content"},j.a.createElement("p",{className:"drift-widget-gdpr-consent--copy",style:i},t),a&&j.a.createElement("div",{className:"drift-widget-reset-consent"},j.a.createElement(u.a,{tabIndex:0,className:"drift-gdpr-action--reset-consent-button",onClick:r},j.a.createElement("span",{className:"drift-gdpr-action--text"},"Reset"))))}),T=function InquireConsent(e){var t=e.message,a=e.onConsentButtonClicked,n=e.yesConsentLabel,r=e.noConsentLabel,c=e.copyStyle,i=void 0===c?{}:c;return j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{className:"drift-widget-greeting-content"},j.a.createElement("p",{className:"drift-widget-gdpr-consent--copy",style:i},t)),j.a.createElement("div",{className:"drift-gdpr-actions"},j.a.createElement(u.a,{tabIndex:0,className:"drift-gdpr-action--allow-consent",onClick:a(!0)},j.a.createElement("span",{className:"drift-gdpr-action--text"},n)),j.a.createElement(u.a,{tabIndex:0,className:"drift-gdpr-action--deny-consent",onClick:a(!1)},j.a.createElement("span",{className:"drift-gdpr-action--text"},r))))};t.a=function GDPR(e){var t=e.previewRef,a=e.resetChatHeight,n=e.canRetryConsent,o=Object(v.b)(),u=Object(v.c)(function(e){return e.embed.configuration.dataProtection}),S=u.policies,A=u.default,M=Object(v.c)(function(e){return e.embed.configuration}).team,L=void 0===M?[]:M,I=Object(v.c)(function(e){return e.session}),R=I.endUser,x=I.gdpr,_=(void 0===x?{}:x).declinedConsent;Object(O.useLayoutEffect)(function(){_&&a()},[_,a]),Object(O.useEffect)(function(){Object(N.a)(E.b.GDPR_REQUESTED)},[]);var P=Object(y.c)().locale,B=Object(g.h)()?Object(g.e)():P,F=Object(d.a)(),U=F.activeColor,D=F.gdprCopyTheme,G=Object(O.useMemo)(function(){return L.find(function(e){return e.bot})||{}},[L]),H=Object(O.useMemo)(function(){var e=Object(p.a)(null,[B],S);if(e)return e;var t=Object(p.a)(null,["".concat(A)],S);return t||(Object(w.n)({data:["No locale matched and unable to find default policy: ".concat(t)]}),null)},[B,S,A]);if(Object(m.a)(h.c.GDPR),!H)return null;return j.a.createElement("div",{className:"drift-widget-gdpr-consent drift-widget-greeting"},j.a.createElement("style",null,"\n          .drift-widget-gdpr-consent .drift-widget-reset-consent button:focus,\n          .drift-widget-gdpr-consent .drift-gdpr-actions button:focus {\n            ".concat(Object(i.c)(U),"\n          }\n        ")),j.a.createElement(l.a,{messageText:"Data Privacy Bot",senderIds:[G.id],textStyles:D}),j.a.createElement("div",{ref:t,className:"drift-widget-gdpr-body"},!_&&j.a.createElement(T,{message:H.message,onConsentButtonClicked:function doRecordConsent(e){return Object(c.a)(r.a.mark(function _callee(){return r.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,Object(N.a)(E.b.GDPR_CLICKED,{accepted:e,endUser:R.id}),!e){t.next=5;break}return t.next=5,s(R.id,H.message);case 5:o(Object(b.p)({hasConsent:e})),e||(o(Object(b.c)(!0)),Object(k.c)("GDPR Declined",{endUserId:R.id}),Object(f.b)()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.warn(t.t0);case 12:case"end":return t.stop()}},_callee,null,[[0,9]])}))},yesConsentLabel:H.giveConsentLabel,noConsentLabel:H.declineConsentLabel,copyStyle:D}),_&&j.a.createElement(C,{consentMessage:H.consentDeclinedMessage,canRetryConsent:n,onRetryConsentClicked:function resetConsentDecline(){o(Object(b.c)(!1))},copyStyle:D})))}},"2VrW":function(e,t,a){},"8eKL":function(e,t,a){"use strict";var n=a("mj2O"),r=a.n(n),c=a("7SM1"),i=a("s8DI"),o=a("O94r"),s=a.n(o),l=a("HXmn"),u=a("NJA7"),d=a("fw6E"),m=a("K7i0"),f=a("+oIK"),g=a("da4L"),b=a("+f1A"),p=a("ERkP"),O=a.n(p),j=a("uDfI"),v=a("0lfv"),E=(a("yAze"),function AgentRequestedOptions(e){var t=e.message,a=t.attributes,n=t.id,o=t.conversationId,s=Object(j.b)(),l=Object(j.c)(function(e){return e.session}).endUser,E=Object(d.a)().conversationHistoryOpen,h=Object(j.c)(function(e){return e.view}).chatOpen,w=Object(p.useState)(!h),y=Object(i.a)(w,2),N=y[0],k=y[1],C=Object(g.m)(t)&&h,T=Object(j.c)(b.d),S=function doSendMessage(e){var a=e.label;return function(){var e=Object(f.a)({message:a,activeConversation:o,authorId:l.id,attributes:{buttonClicked:!0,questionId:t.attributes.questionId,instanceId:T}});s(Object(m.m)({message:e}))}};Object(p.useLayoutEffect)(function(){function _delayButtons(){return(_delayButtons=Object(c.a)(r.a.mark(function _callee(){return r.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(!h||N){e.next=4;break}return e.next=3,Object(v.q)(500);case 3:k(!0);case 4:case"end":return e.stop()}},_callee)}))).apply(this,arguments)}!function delayButtons(){return _delayButtons.apply(this,arguments)}()},[N,h]);var A=N?"visible":"hidden";return O.a.createElement("ul",{className:"drift-widget-message-group drift-widget-message-group-type--END_USER drift-bot-buttons--set drift-bot-buttons--".concat(A)},a.buttons.map(function(e,t){return O.a.createElement("li",{className:"drift-widget-button--list-item","aria-posinset":t,key:"bot-button-".concat(n,"-").concat(t)},O.a.createElement(u.a,{onClick:S(e),invertOnHover:!0,forceFocus:0===t&&C,disabled:E,"aria-label":"".concat(e.label," - Click to reply with this message")},e.label))}))}),h=a("WwEg"),w=a("nfbA"),y=a("efbE"),N=a("rAc1"),k=a("l6A5"),C=function urlIdentity(e){return Object(N.a)(e)},T=(Object(k.a)(C,function(e){return y.l.get("/",{params:{url:encodeURI(e)}})}),Object(k.a)(C,function(e){return y.k.get("/",{params:{url:e,iframe:1,omit_script:1,media:1}})})),S=function Retry(e){var t=e.height,a=void 0===t?24:t,n=e.width,r=void 0===n?24:n;return O.a.createElement("svg",{className:"drift-default-icon drift-default-icon--retry",width:r,height:a,viewBox:"0 0 28 24"},O.a.createElement("path",{d:"M27.82 19.074c-0.17 0.085-0.353 0.126-0.53 0.126-0.436 0-0.854-0.244-1.063-0.664l-0.994-2.010c-1.762 4.469-5.996 7.474-11.002 7.474-5.438 0-10.298-3.548-11.82-8.628-0.19-0.635 0.164-1.304 0.792-1.496 0.624-0.193 1.29 0.166 1.48 0.8 1.222 4.076 5.148 6.924 9.548 6.924 4.128 0 7.481-2.436 8.838-6.126l-2.372 1.199c-0.588 0.298-1.3 0.056-1.592-0.536s-0.055-1.313 0.53-1.609l4.748-2.401c0.589-0.296 1.301-0.055 1.594 0.538l2.374 4.8c0.294 0.593 0.055 1.314-0.53 1.61zM25.259 10.126c-0.626 0.191-1.291-0.167-1.481-0.802-1.223-4.076-5.148-6.924-9.547-6.924-4.132 0-7.486 2.437-8.842 6.127l2.375-1.201c0.588-0.296 1.301-0.055 1.592 0.538 0.294 0.593 0.056 1.314-0.53 1.61l-4.748 2.399c-0.17 0.086-0.352 0.127-0.529 0.127-0.437 0-0.856-0.242-1.063-0.662l-2.375-4.801c-0.293-0.593-0.055-1.314 0.532-1.61 0.589-0.296 1.3-0.055 1.592 0.538l0.994 2.008c1.759-4.468 5.994-7.471 11.003-7.471 5.436 0 10.296 3.548 11.819 8.628 0.191 0.635-0.164 1.304-0.791 1.498z"}))},A=a("nQD+"),M=a("+Kbs"),L=a("Tr4L"),I=a("A5mO"),R=function MessageFooter(e){var t=e.message,a=e.isLastGroup,n=e.isLastMessage,r=e.delivered,c=e.generated,o=e.messageTimedOut,u=e.deliveryFailed,d=e.resolveMessageHeight,m=Object(L.a)().t,f=Object(p.useState)(!1),g=Object(i.a)(f,2),b=g[0],j=g[1];return Object(p.useEffect)(function(){return(o||r)&&Object(v.e)(function(){return j(!1)},500),r||b||j(!0),function(){return j(!1)}},[r,o,b]),Object(p.useLayoutEffect)(function(){d()},[d,r,b,a,n,u]),!r||b?O.a.createElement("li",{key:"".concat(c,"-message-status"),className:s()("drift-widget-message drift-widget-message--meta-date drift-no-op",{"drift-widget-message-failed-status":u})},O.a.createElement("span",{className:"drift-widget-message--meta-status"},!b&&u?m("status.sendMessageFailed"):O.a.createElement(l.a,{size:"small",className:"drift-widget-message--meta-status__sending"}))):a||r?n&&a?O.a.createElement("li",{key:"".concat(t.createdAt,"-message-status"),className:"drift-widget-message--meta-date drift-widget-message"},O.a.createElement("div",{className:"drift-widget-message--meta-status"},O.a.createElement(M.i,{className:"drift-widget-message-sent",height:10,width:12}),O.a.createElement("span",{className:"drift-widget-message--meta-date-stamp"},Object(I.a)(r).unixFmt(m("dt.format.time.short"))))):null:O.a.createElement("li",{key:"".concat(c,"-message-status"),className:"drift-widget-message drift-widget-message--meta-date drift-no-op"})},x=a("QtlZ"),_=a("lE29"),P=a("g6eD"),B=a("LVcX"),F=a("PjZB"),U=a("EQxi"),D=function LazyCard(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.a;return function(a){return O.a.createElement(p.Suspense,{fallback:O.a.createElement(t,null)},O.a.createElement(e,a))}},G=function(){return O.a.createElement("div",{className:"drift-widget-message--box--loader"},O.a.createElement(l.a,null))},H=a("q+cq"),z=(a("CHQR"),function DefaultMessage(e){var t=e.body;return O.a.createElement("div",{className:"drift-widget-message--box drift-widget-message--STRING"},t)}),V=a("9Xg1"),Q={BOT:D(Object(p.lazy)(function(){return a.e(38).then(a.bind(null,"qfyu"))}),G),CONVO_RATING:D(Object(p.lazy)(function(){return a.e(39).then(a.bind(null,"6lGB"))}),G),EMAIL_CAPTURE:D(Object(p.lazy)(function(){return a.e(40).then(a.bind(null,"ZJQa"))}),G),HTML:V.default,LEGACY:D(Object(p.lazy)(function(){return Promise.resolve().then(a.bind(null,"9Xg1"))}),G),MEETING:D(Object(p.lazy)(function(){return a.e(32).then(a.bind(null,"c+1e"))}),function(){return O.a.createElement(H.a,{loadingFrame:!0},O.a.createElement(l.a,null))}),SMS_CAPTURE:D(Object(p.lazy)(function(){return a.e(41).then(a.bind(null,"vYZB"))}),G),SMS_SUCCESS:D(Object(p.lazy)(function(){return a.e(36).then(a.bind(null,"oqPC"))}),G),STRING:z},Z=a("UXBQ"),J=a("vDqi"),X=a.n(J),K=function FileAttachmentMessage(e){var t=e.attachment,a=void 0===t?{}:t,n=e.multi,r=e.senderType,c=void 0===r?F.d.END_USER:r,i=Object(_.a)(),o=i.buttonStyles,s=i.svgStyles,l=i.agentIconTheme;if(!a.fileName)return null;var u=c===F.d.END_USER?s:l;return O.a.createElement(O.a.Fragment,null,O.a.createElement("a",{href:a.publicUrl,target:"_blank",rel:"nofollow noopener noreferrer",className:"drift-widget-message--file",style:n?o:{},"aria-label":"download file"},O.a.createElement(M.k,{fill:u.fill,width:16,height:16}),O.a.createElement("span",{className:"drift-widget-attachment--filename",title:a.fileName},a.fileName)))},q=function ImageAttachmentMessage(e){var t=e.attachment,a=void 0===t?{}:t,n=e.resolveMessageHeight,r=void 0===n?function(){}:n,c=Object(p.useState)(!1),o=Object(i.a)(c,2),s=o[0],l=o[1];return O.a.createElement(O.a.Fragment,null,O.a.createElement("a",{href:a.publicUrl,className:"drift-widget-attachment--img",target:"_blank",rel:"nofollow noopener noreferrer","aria-label":"download file"},O.a.createElement("img",{src:a.publicUrl,alt:a.fileName,onLoad:function onLoad(){!s&&r(),!s&&l(!0)}})))},W=(a("Qp3a"),function AttachmentMessage(e){var t=e.attachmentIds,a=void 0===t?[]:t,n=e.resolveMessageHeight,i=e.sentFrom,o=void 0===i?F.d.END_USER:i,l=Object(j.b)(),u=Object(j.c)(function(e){return e.conversations.attachments}),d=X.a.CancelToken.source(),f=Object(_.a)(),g=f.agentMessageTheme,b=f.endUserMessageTheme,v=o===F.d.END_USER?b:g;Object(p.useEffect)(function(){var e=a.filter(function(e){return!u[e]}),t=function(){var t=Object(c.a)(r.a.mark(function _callee(){var t,a;return r.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Z.a)(e,d.token);case 3:t=n.sent,a=t.data,l(Object(m.e)({attachments:a})),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}},_callee,null,[[0,8]])}));return function fetchAttachmentsForMessage(){return t.apply(this,arguments)}}();return e.length&&t(),function(){d.cancel()}},[u,a,d,l]);var E=Object(p.useMemo)(function(){return a&&a.map(function(e){return u[e]?function isImage(e){var t=e.mimeType;return/image/.test(t)&&"image/svg+xml"!==t}(u[e])?O.a.createElement(q,{attachment:u[e],key:"drift-widget-attachment--".concat(e),resolveMessageHeight:n}):O.a.createElement(K,{multi:a.length>1,attachment:u[e],key:"drift-widget-attachment--".concat(e),senderType:o}):null})},[a,u,n,o]);return O.a.createElement("div",{style:v,className:s()("drift-widget-attachment drift-widget-message--box",{"drift-widget-attachment--multi":a&&a.length>1})},E)}),Y=(a("mQ2C"),function UnfurlMessage(e){var t=e.unfurlData,a=e.style,n=void 0===a?{}:a,r=e.resolveMessageHeight,c=void 0===r?function(){}:r,i=e.sender,o=t.html,l=t.meta,u=void 0===l?{}:l,d=t.links,m=void 0===d?{}:d,f=t.url,g=void 0===f?"":f,b=t.rel,v=void 0===b?[]:b,E=Object(j.b)();Object(p.useLayoutEffect)(function(){c(),E(Object(P.a)(!0))},[c,o,E]);var h=Object(p.useMemo)(function(){return!!u.title||!!u.description||!!u.site},[u]),w=Object(p.useMemo)(function(){return Object(B.a)(null,["thumbnail",0],m)},[m]),y=Object(p.useMemo)(function(){return Object(B.a)(g,["site"],u)},[g,u]),N=Object(p.useMemo)(function(){return v[0]},[v]),k=Object(p.useMemo)(function(){return"player"===N},[N]),C=Object(p.useMemo)(function(){return!k&&w},[k,w]);return Object(p.useMemo)(function(){return(C||k)&&h},[C,k,h])?O.a.createElement("li",{className:"drift-widget-message drift-widget-message--unfurl drift-widget-message-sender--".concat(i)},O.a.createElement("div",{className:s()("drift-widget-message--box drift-widget-message--unfurl-container"),style:n},k&&O.a.createElement("div",{className:"drift-widget-message--unfurl-video",dangerouslySetInnerHTML:{__html:o}}),C&&O.a.createElement("div",{className:"drift-widget-message--unfurl-image"},O.a.createElement("img",{alt:"".concat(y," - thumbnail"),src:w.href,onLoad:function onLoad(){E(Object(P.a)(!0))}})),h&&O.a.createElement("div",{className:"drift-widget-message--unfurl_meta"},u.title&&O.a.createElement("h3",{className:"drift-widget-message--unfurl_title"},O.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:g,title:u.title},u.title)),u.description&&O.a.createElement("p",{className:"drift-widget-message--unfurl_description"},u.description),u.site&&O.a.createElement("p",{className:"drift-widget-message--unfurl_site"},u.site)))):null}),$=(a("ZP32"),function MessageSentTimestamp(e){var t=e.sender,a=e.deliveredAt,n=Object(L.a)().t;return O.a.createElement("span",{className:"drift-widget-message-timestamp drift-widget-message-timestamp--".concat(t)},Object(I.a)(a).unixFmt(n("dt.format.time.short")))}),ee=function MessageComponent(e){var t=e.message,a=e.nextMessage,n=e.isLastGroup,r=e.isLastMessage,c=e.resolveMessageHeight,o=Object(p.useState)([]),l=Object(i.a)(o,2),u=l[0],d=l[1],f=Object(p.useState)(null),b=Object(i.a)(f,2),E=b[0],y=b[1],N=Object(j.b)(),k=Object(j.c)(function(e){return Object(B.a)(!1,["embed","configuration","theme","showUnfurl"],e)}),C=Object(_.a)(),M=C.borderStyles,L=C.endUserMessageTheme,D=C.agentMessageTheme,G=function resolveMessageComponent(e){var t=e.attributes,a=t.isBot,n=void 0!==a&&a,r=t.show_email_capture_card,c=t.conversationRating;return r?Q.EMAIL_CAPTURE:Object(g.i)(e)?Q.MEETING:n?Q.BOT:c?Q.CONVO_RATING:Object(g.k)(e)?Q.SMS_CAPTURE:Object(g.l)(e)?Q.SMS_SUCCESS:Q.HTML}(t),H=Object(g.h)(t)?F.d.END_USER:F.d.AGENT;Object(p.useEffect)(function(){if(!Object(g.e)(t,"instantMeeting")){var e=Object(h.a)(Object(U.a)(t.body));e.length&&d(e)}},[t]),Object(p.useEffect)(function(){if(u.length>0){var e=document.createElement("textarea");e.innerHTML=u[0],T(e.value.replace("#61;","")).then(function(e){var t=e.data;y(t)}).catch(function(e){return Object(v.n)({data:["Failed to unfurl url: ".concat(u[0]),e]})})}},[u]),Object(p.useLayoutEffect)(function(){c(),x.a.dispatch(Object(P.a)(!0))},[c,n]);var z=!!t.attributes.appointmentInfo||!!t.attributes.conversationRating||t.type===F.e.EMAIL_CAPTURE_CARD||t.contentType===F.c.SMS_NUMBER_REQUESTED||t.contentType===F.c.SMS_NUMBER_SUCCESS,V=!!t.body||z,Z=k&&E,J=t.attachments&&t.attachments.length>0;if(!V&&!Z&&!J)return null;var X=Object(B.a)(null,["createdAt"])(t),K=Object(B.a)(null,["attributes","generatedAt"])(t),q=!X&&I.a.now().isAfter(Object(I.a)(K).add(30,"second")),ee=!X&&q;return O.a.createElement(O.a.Fragment,null,V&&O.a.createElement("li",{className:s()("drift-widget-message drift-widget-message-sender--".concat(H),{"drift-widget-message-failed":ee})},O.a.createElement(G,Object.assign({},t,{isLastGroup:n,isLastMessage:r,nextMessage:a,resolveMessageHeight:c,style:H===F.d.END_USER?L:D})),!z&&X&&O.a.createElement($,{sender:H,deliveredAt:X}),ee&&O.a.createElement(A.a,{onClick:function doSendMessage(){N(Object(m.m)({message:Object(w.a)(Object(w.a)({},t),{},{attributes:Object(w.a)(Object(w.a)({},t.attributes),{},{generatedAt:(new Date).valueOf()})})}))}},O.a.createElement(S,{height:12,width:12}))),Z&&O.a.createElement(Y,{unfurlData:E,resolveMessageHeight:c,style:H===F.d.END_USER?Object(w.a)({},M):{},sender:H}),J&&O.a.createElement("li",{className:"drift-widget-message drift-widget-message-sender--".concat(H)},O.a.createElement(W,{attachmentIds:t.attachments,resolveMessageHeight:c,sentFrom:H}),O.a.createElement($,{sender:H,deliveredAt:X})),O.a.createElement(R,{message:t,isLastGroup:n,isLastMessage:r,delivered:X,generated:K,messageTimedOut:q,deliveryFailed:ee,resolveMessageHeight:c}))},te=a("yEsl"),ae=a("7IKl"),ne=(a("UwV1"),function getAvatarPositionClassName(e){var t=Object(g.i)(e),a=e.attributes.show_email_capture_card;return"message-group-avatar-".concat(void 0!==a&&a||t?"top":"bottom")}),re=function MessageGroupHeader(e){var t=e.senderType,a=e.senderId,n=Object(ae.a)(a),r=Object(_.a)().messageAuthorTheme;return t!==F.d.AGENT?null:O.a.createElement("li",{className:"drift-widget-message-sender"},O.a.createElement("span",{className:"drift-widget-message--meta-author",style:r},n))},ce=function MessageGroup(e){var t=e.messages,a=void 0===t?[]:t,n=e.isLastGroup,r=void 0!==n&&n,c=e.showTimestamp,o=void 0!==c&&c,l=e.role,u=void 0===l?"cell":l,d=e.resolveMessageHeight,m=void 0===d?function(){}:d,f=Object(L.a)().t,b=Object(_.a)().messageTimestampTheme;Object(p.useLayoutEffect)(function(){m()},[m,r,o]);var j=Object(i.a)(a,1)[0],v=Object(g.h)(j)?F.d.END_USER:F.d.AGENT,h=j.authorId,w=a[a.length-1],y=r&&Object(g.e)(w,"buttons");return O.a.createElement("div",{role:u,className:s()("drift-widget-message-group-wrapper",{"drift-widget-message-group-wrapper--last":r})},o&&O.a.createElement("p",{className:"drift-widget-message-group-timestamp",style:b},function formatTimestamp(e,t){return e>0?Object(I.a)(e).isSame(I.a.now(),"date")?"".concat(t("dt.today")," ").concat(Object(I.a)(e).unixFmt(t("dt.format.time.short"))):Object(I.a)(e).unixFmt(t("dt.format.datetime.short")):""}(a[0].createdAt,f)),O.a.createElement("ul",{className:"drift-widget-message-group drift-widget-message-group-type--".concat(v)},O.a.createElement(re,{senderType:v,senderId:h}),a.map(function(e,t){var n=t===a.length-1,c=n?null:a[t+1];return O.a.createElement(p.Fragment,{key:e.attributes.generatedAt||e.id||e.attributes.widgetGuid},n&&v===F.d.AGENT&&O.a.createElement("li",{className:s()("drift-widget-message-group-avatar",ne(e))},O.a.createElement(te.a,{id:h,size:"SMALL"})),O.a.createElement(ee,{resolveMessageHeight:m,message:e,nextMessage:c,isLastMessage:n,isLastGroup:r}))})),y&&O.a.createElement(E,{message:w}))},ie=a("gRD2"),oe=a("6wvX"),se=a("fJrp"),le=a("xqp/"),ue=a("qixE"),de=a("xwTo"),me=a("TbSn"),fe=a("mfas"),ge=a("XuDI"),be=(a("P6Di"),function shouldShowTimestamp(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e&&!a)return!1;if(!e)return!0;var n=e?e[e.length-1].createdAt:0;return Object(I.a)(t[0].createdAt).isAfter(Object(I.a)(n).add(2,"hour"))}),pe=function setScrollTop(e,t,a){if(e.scrollTop!==t){var n=e.style;a&&(n["-webkit-overflow-scrolling"]="auto",n.overflow="hidden"),e.scrollTop=t,a&&(n.overflow="scroll",n["-webkit-overflow-scrolling"]="touch")}};t.a=function MessageGroupList(e){var t=e.reflowHidden,a=e.messageGroups,n=e.messages,o=e.disabled,u=void 0!==o&&o,d=e.inheritBackgroundStyle,m=void 0!==d&&d,f=e.showTimestampForFirstGroup,b=void 0===f||f,E=Object(j.b)(),h=Object(_.a)().widgetBackgroundStyles,w=Object(j.c)(de.a),y=Object(ie.a)().fetchMessages,N=Object(j.c)(function(e){return e.view}),k=N.chatOpen,C=N.shouldAutoScrollChatToBottom,T=Object(j.c)(function(e){return Object(B.a)({},["conversations","conversations",w],e)}),S=T.hasMoreMessages,A=T.nextPageMessageId,M=Object(oe.a)(),L=Object(p.useState)(!0),I=Object(i.a)(L,2),R=I[0],x=I[1],U=Object(p.useState)(!1),D=Object(i.a)(U,2),G=D[0],H=D[1],z=Object(p.useState)(!1),V=Object(i.a)(z,2),Q=V[0],Z=V[1],J=Object(p.useState)(!1),X=Object(i.a)(J,2),K=X[0],q=X[1],W=Object(p.useRef)(null),Y=Object(p.useRef)(0),$=Object(p.useRef)(!1),ee=Object(p.useMemo)(function(){return Object(me.a)(n)},[n]),te=Object(se.a)(ee),ae=!!te&&ee!==te,ne=a.length,re=!G&&S&&k,Oe=Object(p.useMemo)(function(){return a.map(function(e,t){var n=t===a.length-1,r=t>0?a[t-1]:null,c=e[0].attributes.widgetGuid||e[0].id;return O.a.createElement(ce,{key:"messageGroup-".concat(c),role:"listitem",messages:e,isLastGroup:n,showTimestamp:be(r,e,b)})})},[a,b]),je=Object(p.useCallback)(function(){var e=Object(c.a)(r.a.mark(function _callee(e){return r.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return H(!0),Z(!0),t.next=4,y({from:e});case 4:q(!0),H(!1),Object(v.e)(function(){return Z(!1)},1e3);case 7:case"end":return t.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),[y]),ve=Object(p.useCallback)(function(e){e.target.scrollTop<=200&&re&&!K&&je(A)},[je,A,re,K]),Ee=m?{}:h;Object(le.a)(ve,W),Object(p.useLayoutEffect)(function(){if(!(ne<1)){if(!k||G||t)!k&&ae&&($.current=!0);else{var e=Object(B.a)(0,["current","scrollHeight"],W),a=Y.current,n=ae||R||$.current||C;W.current&&(n?(pe(W.current,e,M),$.current=!1):K&&pe(W.current,e-a,M)),(n||K)&&(Y.current=e),x(!1),q(!1)}C&&E(Object(P.a)(!1))}},[ne,k,R,G,ae,K,t,M,a,C,E]),Object(p.useEffect)(function(){q(!1),x(!0)},[w]),Object(p.useEffect)(function(){ee&&k&&ee.viewerRecipientStatus!==F.f.READ&&!Object(g.h)(ee)&&Object(ue.c)(w)},[ee,w,k]);return O.a.createElement("div",{className:"drift-widget-message-group-list-container","aria-hidden":u},O.a.createElement("div",{style:Ee,className:s()("drift-widget-message-group-list-loader",{"drift-widget-message-group-list-loader--loading":Q})},O.a.createElement(l.a,{visible:Q})),O.a.createElement(ge.Scrollbars,{ref:function setScrollContainerRef(e){e&&W&&(W.current=e.view)},hideTracksWhenNotNeeded:!0,renderView:function renderScrollbarsView(e){var a=Object(fe.a)(["WebkitOverflowScrolling"],e.style);return O.a.createElement("div",Object.assign({},e,{role:"list",style:a,className:s()("drift-widget-message-group-list",{"drift-widget-message-group-list--hidden":t})}))}},Oe))}},"9Xg1":function(e,t,a){"use strict";a.r(t);var n=a("nfbA"),r=a("O94r"),c=a.n(r),i=a("58kB"),o=a("4bA0"),s=a.n(o),l=a("da4L"),u=a("ERkP"),d=a.n(u),m=a("oPI6"),f=a("PjZB"),g=a("y0on"),b=a("EQxi"),p=function HtmlMessage(e){var t=e.body,a=e.attributes,r=e.isLastMessage,l=e.authorId,p=e.isLastGroup,O=e.style,j=void 0===O?{}:O,v=e.resolveMessageHeight,E=void 0===v?function(){}:v,h=e.className,w=e.viewerRecipientStatus,y=e.authorType;Object(u.useLayoutEffect)(function(){E()},[E,t]);var N=Object(i.a)(l),k=Object(u.useMemo)(function(){return{parsedBody:s()(t,{replace:function replace(e){if("img"===e.name){var t=Object(n.a)(Object(n.a)({},Object(o.attributesToProps)(e.attribs)),{},{onLoad:E});return d.a.createElement("img",t)}if("text"===e.type){if(e.parentNode&&"a"!==e.parentNode.name){var a=Object(b.e)(e.data);return d.a.createElement(d.a.Fragment,null,s()(a))}}else if("a"===e.name){var r={href:e.attribs.href,target:"_blank",rel:"noopener noreferrer"};return d.a.createElement("a",r,Object(o.domToReact)(e.children))}}})}},[t,E]).parsedBody,C=r&&p&&y===f.b.USER&&w!==f.f.READ,T=C?Object(g.a)(N.recipient.name,a&&""!==a.preview?a.preview:t):null;return d.a.createElement("div",{className:c()("drift-widget-message--box drift-widget-message--HTML",h),style:j},C&&d.a.createElement(m.b,{message:T,"aria-live":"polite",clearOnUnmount:!0}),d.a.createElement("div",null,k))};t.default=function(e){return Object(l.g)(e.body)?null:d.a.createElement(p,e)}},"9wXn":function(e,t,a){},BY8A:function(e,t,a){"use strict";var n=a("s8DI"),r=a("ERkP"),c=a.n(r),i=a("uDfI"),o=a("rTkt");a("zoZM");t.a=function ThemeStyleSheets(){var e=Object(r.useState)(!1),t=Object(n.a)(e,2),a=t[0],s=t[1],l=Object(i.c)(function(e){return e.embed});return Object(r.useEffect)(function(){a||(Object(o.a)(l),Object(o.b)(l),s(!0))},[l,a]),c.a.createElement("div",{className:"drift-widget-preload-fonts","aria-hidden":"true"},c.a.createElement("span",null,"A"),c.a.createElement("strong",null,"B"))}},CHQR:function(e,t,a){},CwrG:function(e,t,a){"use strict";var n=a("nJ3u"),r=a("O94r"),c=a.n(r),i=a("+Kbs"),o=a("z24s"),s=a("lE29"),l=a("SFoa"),u=a("LVcX"),d=a("ERkP"),m=a.n(d),f=a("TVEO"),g=a("uDfI"),b=(a("p0+K"),function Drift(){var e=Object(d.useRef)(null),t=Object(o.a)(e),a=Object(s.a)().footerTextColor,n=Object(u.a)("",["context","page","hostname"],Object(g.c)(function(e){return e.session})),r=Object(d.useMemo)(function(){return Object(l.g)()<=1?"":"?utm_source=".concat(n,"&utm_medium=web-widget&utm_campaign=widget-referral&utm_version=v2")},[n]);return m.a.createElement("a",{href:"https://www.drift.com/powered-by".concat(r),className:c()("drift-widget-power",{"keyboard-focused":t}),rel:"noopener noreferrer",target:"_blank",ref:e,style:a},m.a.createElement(f.a,{i18nKey:"composer.footer.poweredByDrift",components:[m.a.createElement(i.c,{height:12,width:12}),m.a.createElement("span",{className:"drift-widget-power-brand"},"Drift")]}))}),p=a("8Epr"),O=a("Hvhg");a("2VrW"),t.a=function Footer(){var e=Object(g.c)(O.b).showBranding,t=void 0!==e&&e,a=Object(p.a)(),r=a.privacyPolicyLink,i=a.privacyPolicyLinkText,l=a.noPolicy,u=Object(s.a)(),f=u.activeColor,j=u.footerTextColor,v=Object(d.useRef)(null),E=Object(o.a)(v);return!t&&l?null:m.a.createElement("div",{className:c()("drift-widget-footer",{"drift-widget-footer--with-branding":t})},m.a.createElement("style",null,"\n          .drift-widget-power.keyboard-focused,\n          .drift-widget-footer--with-branding .drift-widget-footer-privacy.keyboard-focused {\n            ".concat(Object(n.e)(f),"\n          }\n        ")),t&&m.a.createElement(b,null),t&&!l&&m.a.createElement("span",{className:"drift-widget-footer-privacy-spacer","aria-hidden":"true",style:j},"|"),!l&&m.a.createElement(m.a.Fragment,null,m.a.createElement("span",{className:c()("drift-widget-footer-privacy",{"keyboard-focused":E})},m.a.createElement("a",{href:r,rel:"noopener noreferrer",target:"_blank",title:i,className:"drift-widget-footer-privacy--link",ref:v,style:j},i))))}},I4Wp:function(e,t,a){},IuzP:function(e,t,a){},JhcM:function(e,t,a){},Jrg8:function(e,t,a){},Jwn2:function(e,t,a){},Lzfp:function(e,t,a){"use strict";var n=a("jm9a"),r=a("O94r"),c=a.n(r),i=a("+Kbs"),o=a("ERkP"),s=a.n(o),l=(a("eSyn"),function SearchLabel(e){var t=e.ariaLabel,a=void 0===t?"":t,r=e.ariaLabelledBy,o=void 0===r?"":r,l=e.className,u=void 0===l?"":l,d=e.htmlFor,m=void 0===d?"":d;return s.a.createElement("label",{"aria-label":a,"aria-labelledby":o,className:c()("drift-widget--search-label",Object(n.a)({},u,!!u)),htmlFor:m},s.a.createElement(i.o,{titleId:o,title:a,width:12,height:12}))});a.d(t,"a",function(){return l})},NJA7:function(e,t,a){"use strict";var n=a("nfbA"),r=a("jm9a"),c=a("hX/4"),i=a("nJ3u"),o=a("O94r"),s=a.n(o),l=a("z24s"),u=a("o3t1"),d=a("lE29"),m=a("ERkP"),f=a.n(m),g=a("0lfv");a("Jwn2");t.a=function Button(e){var t,a=e.children,o=e.className,b=e.invertColors,p=e.invertOnHover,O=e.forceFocus,j=void 0!==O&&O,v=Object(c.a)(e,["children","className","invertColors","invertOnHover","forceFocus"]),E=Object(d.a)(),h=E.activeColor,w=E.buttonStyles,y=E.foregroundStyles,N=E.widgetBackgroundColor,k=Object(u.a)(),C=k.hoverProps,T=k.isHovered,S=Object(m.useRef)(null),A=Object(l.a)(S),M=b?y:w,L=b?w:y;return Object(m.useEffect)(function(){var e=S;return j?Object(g.p)(function(){return e.current&&e.current.focus()}):Object(g.p)(function(){return e.current&&e.current.blur()}),function(){return e.current&&e.current.blur()}},[j]),f.a.createElement(f.a.Fragment,null,f.a.createElement("style",null,"\n          .drift-widget-button.keyboard-focused {\n            ".concat(Object(i.d)(N,h),"\n          }\n        ")),f.a.createElement("button",Object.assign({ref:S,className:s()("drift-widget-button",(t={},Object(r.a)(t,o,!!o),Object(r.a)(t,"keyboard-focused",A),t)),style:T&&p?Object(n.a)({},L):Object(n.a)({},M),onTouchStart:g.o},C,v),a))}},P6Di:function(e,t,a){},"PGb/":function(e,t,a){},Q80r:function(e,t,a){},Qp3a:function(e,t,a){},RJSH:function(e,t,a){},UXBQ:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"a",function(){return c});var n=a("efbE"),r=function uploadAttachment(e,t){var a=new FormData;return a.append("conversationId",t),a.append("file",e),n.a.post("/attachments",a)},c=function fetchAttachments(e,t){return n.a.get("/attachments",{params:{id:e},cancelToken:t})}},UwV1:function(e,t,a){},ZGTz:function(e,t,a){"use strict";var n=a("mj2O"),r=a.n(n),c=a("7SM1"),i=a("s8DI"),o=a("O94r"),s=a.n(o),l=a("HXmn"),u=a("LVcX"),d=a("ERkP"),m=a.n(d),f=a("Tr4L"),g=a("uDfI"),b=a("oFTC"),p=(a("uqJV"),a("Q80r"),Object(d.lazy)(function(){return Promise.all([a.e(14),a.e(44)]).then(a.bind(null,"tBak"))})),O=function EmojiPickerLoader(e){var t=e.loadingText;return m.a.createElement("div",{className:"drift-widget-emoji-picker--loader"},m.a.createElement("p",null,t),m.a.createElement(l.a,null))};t.a=function EmojiPicker(e){var t=e.open,n=e.onAddEmoji,o=e.onClickOutside,l=Object(f.a)().t,j=Object(g.c)(function(e){return e.conversations}).activeConversation,v="en"!==Object(g.c)(function(e){return Object(u.a)("en",["embed","configuration","locale"],e)}),E=Object(d.useMemo)(function(){return function createEmojiMartI18nProp(e){return{search:e("emoji.search"),clear:e("emoji.clear"),notfound:e("emoji.notfound"),skintext:e("emoji.skintext"),categories:{search:e("emoji.category.search"),recent:e("emoji.category.recent"),smileys:e("emoji.category.smileys"),people:e("emoji.category.smileys"),nature:e("emoji.category.nature"),foods:e("emoji.category.foods"),activity:e("emoji.category.activity"),places:e("emoji.category.places"),objects:e("emoji.category.objects"),symbols:e("emoji.category.symbols"),flags:e("emoji.category.flags"),custom:e("emoji.category.custom")},categorieslabel:e("emoji.categorieslabel"),skintones:{1:e("emoji.skintone1"),2:e("emoji.skintone2"),3:e("emoji.skintone3"),4:e("emoji.skintone4"),5:e("emoji.skintone5"),6:e("emoji.skintone6")}}}(l)},[l]),h=Object(d.useRef)(null),w=Object(d.useState)(null),y=Object(i.a)(w,2),N=y[0],k=y[1];Object(d.useEffect)(function(){t&&!N&&function(){var e=Object(c.a)(r.a.mark(function _callee(){return r.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.e(47).then(a.t.bind(null,"8ozv",3)).then(function(e){return k(e.default)});case 2:case"end":return e.stop()}},_callee)}));return function fetchEmojiData(){return e.apply(this,arguments)}}()()},[t,N]),Object(b.a)(h,function(e){o(e)});return m.a.createElement("div",{ref:h,className:s()("drift-widget-composer-emoji-picker",{"drift-widget-composer-emoji-picker--open":t,"drift-widget-composer-emoji-picker--full":j,"drift-widget-composer-emoji-picker--mini":!j,"drift-widget-composer-emoji-picker--hide-search":v})},m.a.createElement(d.Suspense,{fallback:m.a.createElement(O,{loadingText:l("status.loading")})},!!N&&m.a.createElement(p,{darkMode:!1,hideSearch:v,onSelect:function addEmojiToMessage(e){var t=e.native;n(function(e){return"".concat(e," ").concat(t)})},sheetSize:64,set:"apple",data:N,exclude:["flags","symbols","objects"],perLine:6,emojiTooltip:!v,i18n:E,showPreview:!1,showSkinTones:!1,onClickOutside:o})))}},ZP32:function(e,t,a){},Ztgx:function(e,t,a){"use strict";var n=a("yEsl"),r=a("58kB"),c=a("i9gz"),i=a("weY7"),o=a("RhEL"),s=a("ERkP"),l=a.n(s),u=a("Tr4L"),d=a("uDfI"),m=a("F8vJ");a("oY6K");t.a=l.a.memo(function SenderInfo(e){var t=e.senderIds,a=e.messageText,o=void 0===a?null:a,f=e.textStyles,g=void 0===f?{}:f,b=Object(u.a)().t,p=Object(d.c)(function(e){return e.embed.configuration.organizationName}),O=Object(r.b)(t),j=Object(s.useMemo)(function(){var e;if(o)return o;if(t.length>1||Object(c.a)(O))return"";var a=null===(e=O[0])||void 0===e?void 0:e.recipient;if(!a||!a.name)return"";var n=!p||!p.length||Object(m.a)(p),r=!!p&&a.name.toLowerCase()===p.toLowerCase();return n||r?"".concat(a.name):b("header.senderInfo",{name:a.name,orgName:p})},[t.length,O,p,o,b]);return l.a.createElement("div",{className:"drift-widget-greeting-agent-header"},l.a.createElement("h1",{className:"drift-widget-greeting-recipient-name",style:g},j),l.a.createElement(function Avatars(){return l.a.createElement(l.a.Fragment,null," ",Object(i.a)(function(e){return e.recipient?l.a.createElement(n.a,{key:e.recipient.id,id:e.recipient.id}):l.a.createElement(l.a.Fragment,null)},O))},null))},function propsAreEqual(e,t){return e.senderId===t.senderId&&e.messageText===t.messageText||Object(o.a)(e.senderIds,t.senderIds)&&e.messageText===t.messageText})},eSyn:function(e,t,a){},fTFZ:function(e,t,a){"use strict";var n=a("nfbA"),r=a("WwEg"),c=a("s8DI"),i=a("nJ3u"),o=a("O94r"),s=a.n(o),l=a("7IKl"),u=a("lE29"),d=a("ERkP"),m=a.n(d),f=a("Tr4L"),g=a("uDfI"),b=(a("I4Wp"),function AgentTypingIndicator(){var e=Object(f.a)().t,t=Object(u.a)().widgetBackgroundAlpha,a=Object(g.c)(function(e){return e.conversations.typingIndicators[e.conversations.activeConversation]||{}}),n=a.isTyping,r=void 0!==n&&n,c=a.userId,i=Object(l.a)(c);return r?m.a.createElement("p",{style:t,className:"agent-typing-indicator"},e("status.agentTyping",{agent:i})):null}),p=a("ZGTz"),O=a("mj2O"),j=a.n(O),v=a("7SM1"),E=a("efbE"),h=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"],w=function localeToGiphyLang(e){switch(e){case"de-DE-formal":return"de";case"zh":return"zh-CN";case"zh-HK":return"zh-TW";case"pt-BR":return"pt"}return h.includes(e)?e:"en"},y=function getTrendingGiphys(e){return E.i.get("/trending",{params:{limit:e,rating:"pg"}})},N=function getSearchGiphys(e,t){var a=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).locale;return E.i.get("/search",{params:{limit:t,q:e,lang:w(a),rating:"pg"}})},k=a("Lzfp"),C=a("+Kbs"),T=a("UAQ6"),S=a("nvPd"),A=a("6wvX"),M=a("z24s"),L=a("97O6"),I=a.n(L),R=a("oFTC"),x=a("0lfv"),_=a("L3eC"),P=(a("RJSH"),function GiphyPicker(e){var t=e.onAddGiphy,a=e.disabled,n=void 0!==a&&a,r=Object(f.a)().t,o=Object(T.a)(),l=Object(d.useState)([]),g=Object(c.a)(l,2),b=g[0],p=g[1],O=Object(d.useState)(!1),E=Object(c.a)(O,2),h=E[0],w=E[1],L=Object(d.useState)(!1),P=Object(c.a)(L,2),B=P[0],F=P[1],U=Object(d.useState)(!1),D=Object(c.a)(U,2),G=D[0],H=D[1],z=Object(d.useRef)(null),V=Object(d.useRef)(null),Q=Object(d.useRef)(null),Z=Object(S.a)(""),J=Z.value,X=Z.onChange,K=Object(A.a)(),q=Object(M.a)(Q),W=Object(u.a)(),Y=W.activeColor,$=W.composerButtonHoverColor,ee=W.composerButtonIconColor,te=Object(d.useMemo)(function(){return Object(x.d)(function(){var e=Object(v.a)(j.a.mark(function _callee(e){var t,a;return j.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N(e,51,{locale:o});case 2:t=n.sent,a=t.data,p(a.data);case 5:case"end":return n.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),200,!1)},[o]),ae=Object(d.useCallback)(Object(v.a)(j.a.mark(function _callee2(){var e,t;return j.a.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y(51);case 2:e=a.sent,t=e.data,p(t.data);case 5:case"end":return a.stop()}},_callee2)})),[]);Object(R.a)(z,function(){h&&(w(!1),Object(_.a)(null===Q||void 0===Q?void 0:Q.current),H(!0))}),Object(d.useEffect)(function(){h&&!K&&V.current.focus(),h&&ae()},[h,K,ae]),Object(d.useEffect)(function(){h&&(J.length>0?te(J):ae())},[J,h,te,ae]),Object(d.useEffect)(function(){if(G){var e=window.setTimeout(function(){H(!1)},200);return function(){window.clearTimeout(e)}}},[G]);return m.a.createElement(m.a.Fragment,null,m.a.createElement("style",null,"\n          .drift-widget-composer-giphy-toggle.keyboard-focused,\n          .drift-widget-composer-giphy-picker .drift-widget-composer-giphy-picker-search input:focus,\n          .drift-widget-composer-giphy-picker .drift-widget-composer-giphy-list-item button:focus {\n            ".concat(Object(i.b)(Y),"\n          }\n        ")),m.a.createElement("button",{className:s()("drift-widget-composer-giphy-toggle",{"keyboard-focused":q}),onClick:function openGiphy(){G||h||w(!0)},"aria-label":"Add GIF - Click to toggle",disabled:n,ref:Q,onFocus:function onFocus(){return F(!0)},onMouseOver:function onMouseOver(){return F(!0)},onMouseLeave:function onMouseLeave(){return F(!1)}},m.a.createElement(C.m,{fill:B?$:ee})),m.a.createElement("div",{tabIndex:-1,className:s()("drift-widget-composer-giphy-picker",{"drift-widget-composer-giphy-picker--show":h,"drift-widget-composer-giphy-picker--mobile":K}),ref:z},m.a.createElement("div",{className:"drift-widget-composer-giphy-picker-search"},m.a.createElement(k.a,{ariaLabel:"Search for a GIF",ariaLabelledBy:"searchGIF",className:"drift-widget--giphy-picker-search-label",htmlFor:"giphy-picker-search"}),m.a.createElement("input",{className:"drift-widget-input",ref:V,type:"search",placeholder:r("gifPicker.searchPlaceholder"),value:J,onChange:X,onFocus:function onInputFocus(e){K&&e.stopPropagation()},"aria-label":"Search GIFs",id:"giphy-picker-search"})),m.a.createElement("div",{className:"drift-widget-composer-giphy-picker-list-wrapper"},m.a.createElement("ul",{className:"drift-widget-composer-giphy-list"},b.map(function(e){return m.a.createElement("li",{key:e.id,className:"drift-widget-composer-giphy-list-item"},m.a.createElement("button",{onClick:function onClick(){return function addGiphyToMessage(e){t('<img src="'.concat(e.url,'" alt="gif" />')),w(!1),Object(_.a)(null===Q||void 0===Q?void 0:Q.current)}(e.images.original)}},m.a.createElement("img",{src:e.images.preview_gif.url,alt:e.title||"Gif from Giphy"})))}))),m.a.createElement("span",{className:"drift-widget-composer-giphy-picker-power"},m.a.createElement("img",{src:I.a,alt:r("gifPicker.poweredBy")}))))}),B=a("908p"),F=a("nQD+"),U=a("HXmn"),D=a("sPXl"),G=a("mZ4K"),H=a("P+wr"),z=a("vLHT"),V=a("jITz"),Q=a("6rzO"),Z=a("58kB"),J=a("uQkC"),X=a("Hvhg"),K=a("+oIK"),q=a("LVcX"),W=a("U505"),Y=a("ovDp"),$=a("vwUF");a("IuzP");a.d(t,"a",function(){return ee});var ee,te="GIF",ae="TEXT",ne=function validateMessageText(e){return!Object(x.m)(e)&&e.trim().length>0};!function(e){e[e.AVAILABLE=0]="AVAILABLE",e[e.AVAILABLE_BUTTONS=1]="AVAILABLE_BUTTONS",e[e.UNAVAILABLE=2]="UNAVAILABLE",e[e.UNAVAILABLE_BUTTONS=3]="UNAVAILABLE_BUTTONS"}(ee||(ee={}));t.b=function Composer(e){var t=e.onSubmit,a=e.activeConversationId,o=e.disabled,l=void 0!==o&&o,O=e.chatHidden,j=e.alwaysShowSendAction,v=void 0!==j&&j,E=e.useGifPicker,h=void 0===E||E,w=e.alwaysShow,y=void 0!==w&&w,N=Object(d.useRef)(null),k=Object(d.useRef)(null),T=Object(d.useRef)(null),S=Object(d.useRef)(null),L=Object(z.a)(),I=Object(d.useState)(""),R=Object(c.a)(I,2),_=R[0],re=R[1],ce=Object(d.useState)(!1),ie=Object(c.a)(ce,2),oe=ie[0],se=ie[1],le=Object(d.useState)(!1),ue=Object(c.a)(le,2),de=ue[0],me=ue[1],fe=Object(d.useState)(!1),ge=Object(c.a)(fe,2),be=ge[0],pe=ge[1],Oe=Object(d.useState)([]),je=Object(c.a)(Oe,2),ve=je[0],Ee=je[1],he=Object(D.a)(N),we=Object(M.a)(N),ye=Object(M.a)(k),Ne=Object(M.a)(T),ke=Object(M.a)(S),Ce=Object(g.c)(function(e){return e.view}),Te=Ce.matchedHours,Se=Ce.chatOpen,Ae=Object(g.c)(function(e){return e.conversations.attachments}),Me=Object(g.c)(function(e){return e.session.endUser.id}),Le=Object(g.c)(function(e){return Object(q.a)(!1,["embed","configuration","theme"],e)}).allowEndUserFileUpload,Ie=Object(g.c)(X.g),Re=h&&Ie,xe=Object(f.a)().t,_e=Object(A.a)(!0),Pe=Object(G.a)(),Be=Object(u.a)(),Fe=Be.activeColor,Ue=Be.widgetBackgroundColor,De=Be.composerTheme,Ge=Be.composerButtonHoverColor,He=Be.composerButtonIconColor,ze=Object(Z.a)(Pe).recipient,Ve=Object(Q.a)({inputRef:N}),Qe=Ve.pastedFiles,Ze=Ve.clearFiles,Je=Object(V.a)({ref:N,targetKey:"Enter"}),Xe=Object(J.a)({activeConversationId:a}),Ke=Xe.sendTypingStarted,qe=Xe.sendTypingFinished,We=Object(H.a)({activeConversation:a,onAttachmentUploadComplete:Object(d.useCallback)(function onAttachmentUploadComplete(e){Ee(function(t){return[].concat(Object(r.a)(t),Object(r.a)(e))}),Ze()},[])}),Ye=We.attachmentState,$e=We.uploadAttachments,et=We.resetAttachmentState,tt=L===ee.AVAILABLE||L===ee.AVAILABLE_BUTTONS,at=Object(d.useMemo)(function(){return!y&&(l||!tt)},[y,l,tt]),nt=Object(Y.a)({onDrop:$e,disabled:l||!tt||!Le}),rt=nt.getRootProps,ct=nt.getInputProps,it=nt.open,ot=ne(_)||!Object(x.m)(ve),st=Ye===$.b.PENDING,lt=Ye===$.b.ERROR||Ye===$.b.SIZE_ERROR,ut=l||!tt||!!Qe.length;var dt=Object(d.useCallback)(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae,c=ve?{attachments:ve}:{},i=a?{}:{sentWelcomeMessage:Te};qe();var o=r===ae?Object(x.r)(e):e;t({message:Object(K.a)(Object(n.a)({message:o,activeConversation:a||null,authorId:Me,attributes:i},c))}),re(""),Ee([]),et()},[a,Me,Te,t,et,qe,ve]);Object(d.useEffect)(function(){Le?Qe.length&&!st&&$e(Qe):Ze()},[Le,st,Ze,Qe,$e]),Object(d.useEffect)(function(){he&&Je&&(ne(_)||ve.length)&&dt(_,ae)},[he,_,Je,dt,ve.length]),Object(d.useEffect)(function(){a&&re("")},[a]),Object(d.useEffect)(function(){var e=N,t=L===ee.AVAILABLE_BUTTONS;return Se&&tt&&!t&&!O&&e.current&&e.current.focus(),function(){return e.current&&e.current.blur()}},[O,Se,tt,L]);var mt=Object(d.useMemo)(function(){return tt?xe("composer.replyToPlaceholder",{name:ze.name}):xe(L===ee.UNAVAILABLE_BUTTONS?"composer.chooseOptionAbove":"composer.replyDisabled")},[tt,ze.name,L,xe]),ft=Le&&!!a,gt=Re&&!ot&&!!a,bt=v||!Re||ot,pt=ft||bt||gt,Ot=l||!ot||st;return m.a.createElement(m.a.Fragment,null,(ve.length||st||lt)&&m.a.createElement("div",{className:"drift-widget-composer--pre-message-attachments"},lt&&m.a.createElement("div",{className:"drift-widget-attachment-send-status drift-widget-attachment-send-status--failed"},m.a.createElement("span",{className:"drift-widget-attachment-send-status--text"},xe(Ye===$.b.SIZE_ERROR?"attachment.errorSize":"attachment.error")),m.a.createElement(F.a,{onClick:function onClick(){et(),Ze()},className:"drift-widget-attachment-send-status--close",disabled:l},m.a.createElement(C.j,{width:10,height:10}))),(ve.length||st)&&m.a.createElement("ul",{className:"drift-widget-composer-attachment-preview-list"},[].concat(Object(r.a)(ve),Object(r.a)(st?[{pending:!0}]:[])).map(function(e,t){return m.a.createElement("li",{key:Ae[e]?Ae[e].id:"file-upload-loader"},Ae[e]&&!Ae.pending&&m.a.createElement(F.a,{"aria-label":"Remove attachment ".concat(t+1),onClick:function onClick(){return function onRemoveUploadedAttachment(e){Ee(function(t){return Object(W.a)([e],t)})}(e)},disabled:l},m.a.createElement(C.j,{width:6,height:6})),Ae[e]&&!Ae.pending?function resolveAttachmentTypeComponent(e){return e?e.mimeType.includes("image")?m.a.createElement("div",{className:"drift-widget-composer-attachment-preview-list-image-wrapper"},m.a.createElement("img",{alt:e.fileName,src:e.publicUrl})):m.a.createElement("div",{className:"drift-widget-composer-attachment-non-image",title:e.filename},m.a.createElement("strong",null,e.fileName),m.a.createElement(C.k,{width:16,height:16})):null}(Ae[e]):m.a.createElement(U.a,{size:"small",className:"drift-widget-composer-attachment-loader"}))}))),m.a.createElement("style",null,"\n          .drift-widget-input.keyboard-focused {\n            ".concat(Object(i.d)(Ue,Fe),"\n          }\n\n          .drift-widget-composer-emoji-toggle.keyboard-focused:before {\n            ").concat(Object(i.a)(Fe,24,-2,2),"\n          }\n\n          .drift-widget-composer-actions .file-attachment.keyboard-focused,\n          .drift-widget-composer-send-button.keyboard-focused,\n          .drift-widget-composer--pre-message-attachments button:focus {\n            ").concat(Object(i.c)(Fe),"\n          }\n        ")),m.a.createElement("div",Object.assign({},rt({onClick:function onClick(e){return e.stopPropagation()}}),{className:s()("drift-widget-composer--default",{"drift-widget-composer--mobile":_e,"drift-widget-composer--hidden":at}),tabIndex:-1}),Le&&m.a.createElement("input",ct()),m.a.createElement(b,null),m.a.createElement("div",{className:"drift-widget-composer--text-area"},m.a.createElement("pre",null,tt&&_.length?_:" "),m.a.createElement("label",{className:"drift-a11y-visually-hidden",htmlFor:"drift-widget-composer-input"},mt),m.a.createElement("textarea",{className:s()("drift-widget-input",{"keyboard-focused":we}),ref:N,placeholder:mt,value:tt?_:"",onChange:function onTextareaChange(e){Je||Qe.length||(re(e.target.value),Ke())},"aria-label":"message composer",maxLength:4096,disabled:ut,tabIndex:0,id:"drift-widget-composer-input",style:De}),tt&&!_e&&m.a.createElement("button",{ref:k,className:s()("drift-widget-composer-emoji-toggle",{"keyboard-focused":ye}),onClick:function onEmojiButtonClick(){ut||se(!oe)},disabled:l,"aria-expanded":oe,"aria-label":"emojis",onFocus:function onFocus(){return me(!0)},onMouseOver:function onMouseOver(){return me(!0)},onMouseLeave:function onMouseLeave(){return me(!1)}},m.a.createElement(C.l,{fill:de?Ge:He}))),tt&&!_e&&m.a.createElement(p.a,{open:oe,onAddEmoji:function onAddEmoji(e){se(!oe),tt&&!l&&(re(e),N.current&&N.current.focus())},onClickOutside:function onEmojiPickerClickOutside(e){k.current&&k.current.contains(e.target)||se(!1)}}),tt&&pt&&m.a.createElement("div",{className:s()("drift-widget-composer-actions",{"drift-widget-composer-actions-expanded":ft&&(gt||bt)})},ft&&m.a.createElement("button",{ref:T,className:s()("file-attachment",{"keyboard-focused":Ne}),onClick:it,"aria-label":"add an attachment",disabled:l,onFocus:function onFocus(){return pe(!0)},onMouseOver:function onMouseOver(){return pe(!0)},onMouseLeave:function onMouseLeave(){return pe(!1)}},m.a.createElement(C.a,{fill:be?Ge:He})),gt&&m.a.createElement(P,{onAddGiphy:function onAddGiphy(e){return dt(e,te)},disabled:l}),bt&&m.a.createElement("button",{className:s()("drift-widget-composer-send-button",{"drift-widget-composer-send-button--disabled":Ot,"keyboard-focused":ke}),"aria-label":"send message",onClick:function onClick(){return dt(_,ae)},disabled:Ot||st,ref:S},m.a.createElement(B.a,{color:"#".concat(Fe)})))))}},mQ2C:function(e,t,a){},noex:function(e,t,a){"use strict";var n=a("O94r"),r=a.n(n),c=a("yEsl"),i=a("MQZS"),o=a("58kB"),s=a("LVcX"),l=a("ERkP"),u=a.n(l),d=a("Tr4L"),m=a("6lNa");a("t/7O");t.a=function PresenceAvatar(e){var t=e.size,a=void 0===t?"LARGE":t,n=e.id,f=void 0===n?null:n,g=e.className,b=e.image,p=Object(d.a)().t,O=Object(o.a)(f).recipient,j=Object(l.useMemo)(function(){return Object(s.a)(null,["avatarUrl"],O)},[O]),v=Object(l.useMemo)(function(){return Object(s.a)(!1,["bot"],O)},[O]),E=Object(i.a)(f,O.bot),h=Object(l.useMemo)(function(){return E?E===m.a.ONLINE?p("user.status.active"):E===m.a.OFFLINE?p("user.status.away"):null:null},[E,p]);return j||v?u.a.createElement("div",{className:r()("drift-widget-presence-avatar",g),title:E?h:""},u.a.createElement(c.a,{size:a,id:f,image:b||j}),E&&E===m.a.ONLINE&&u.a.createElement("div",{className:r()("drift-widget-agent-status","drift-widget-agent-status--online"),"aria-label":"agent status ".concat(h)}),E&&E===m.a.OFFLINE&&u.a.createElement("div",{className:r()("drift-widget-agent-status","drift-widget-agent-status--offline"),"aria-label":"agent status ".concat(h)},u.a.createElement("div",{className:"drift-widget-agent-status--offline-dot"}))):null}},oY6K:function(e,t,a){},"p0+K":function(e,t,a){},pYxh:function(e,t,a){"use strict";var n=a("O94r"),r=a.n(n),c=a("ERkP"),i=a.n(c);a("vYbd");t.a=function Card(e){return i.a.createElement("div",Object.assign({},e,{className:r()("drift-widget-card",e.className),tabIndex:-1}),e.children)}},"q+cq":function(e,t,a){"use strict";var n=a("O94r"),r=a.n(n),c=a("pYxh"),i=a("rmQ0"),o=a("ey6Y"),s=a("ERkP"),l=a.n(s),u=a("Tr4L");t.a=function MeetingSchedulerCard(e){var t=e.agentId,a=e.additionalAgents,n=void 0===a?[]:a,d=e.children,m=e.duration,f=e.showRecipients,g=void 0!==f&&f,b=e.loadingFrame,p=void 0!==b&&b,O=Object(u.a)().t,j=Object(o.a)(t,n),v=O("meeting.scheduleAMeeting");g&&(v=t?"".concat(v," with ").concat(j):v);var E=p?{}:{minHeight:"350px"};return Object(s.useEffect)(function(){var e=document.querySelector(".drift-meeting-scheduler");e&&e.focus()},[]),l.a.createElement(c.a,{"aria-label":v,className:r()("drift-meeting-scheduler",{"drift-meeting-scheduler--loader":p}),style:E},l.a.createElement(i.a,{className:"drift-meeting-scheduler--header"},l.a.createElement("span",null,v),m&&l.a.createElement("span",null,O("meeting.duration",{duration:m}))),l.a.createElement("div",{className:"drift-meeting-scheduler--content"},d))}},rmQ0:function(e,t,a){"use strict";var n=a("nfbA"),r=a("O94r"),c=a.n(r),i=a("lE29"),o=a("ERkP"),s=a.n(o);a("9wXn");t.a=function CardHeader(e){var t=Object(i.a)().cardHeaderTheme;return s.a.createElement("header",Object.assign({},e,{className:c()("drift-widget-card-header",e.className),style:Object(n.a)(Object(n.a)({},t),e.style)}),s.a.createElement("div",{className:"drift-widget-card-header--content"},e.children))}},sZBt:function(e,t,a){},slYP:function(e,t,a){"use strict";var n=a("s8DI"),r=a("O94r"),c=a.n(r),i=a("rmQ0"),o=a("+Kbs"),s=a("nQD+"),l=a("hX/4"),u=a("ZGTz"),d=a("6wvX"),m=a("ERkP"),f=a.n(m),g=(a("+GZi"),function TextArea(e){var t=e.value,a=e.onValueChange,r=Object(l.a)(e,["value","onValueChange"]),i=Object(d.a)(!0),g=Object(m.useState)(!1),b=Object(n.a)(g,2),p=b[0],O=b[1],j=Object(m.useRef)(null),v=Object(m.useRef)(null);return f.a.createElement(f.a.Fragment,null,!i&&f.a.createElement(u.a,{open:p,onAddEmoji:function onAddEmoji(e){O(!p),r.disabled||(a&&a(e),v.current&&v.current.focus())},onClickOutside:function onEmojiPickerClickOutside(e){j.current&&j.current.contains(e.target)||O(!1)}}),f.a.createElement("div",{className:"drift-widget-textarea"},f.a.createElement("pre",null,t&&t.length?t:" "),f.a.createElement("textarea",Object.assign({},r,{className:c()("drift-widget-input",r.className),value:t,ref:v,onChange:function onTextAreaChange(e){a&&a(e.target.value),r.onChange&&r.onChange(e)},disabled:r.disabled})),!r.disabled&&!i&&f.a.createElement(s.a,{ref:j,className:"drift-widget-textarea--emoji-toggle",onClick:function onEmojiButtonClick(){r.disabled||O(!p)},disabled:r.disabled,"aria-expanded":p,"aria-label":"emojis"},f.a.createElement(o.l,null))))}),b=a("Mur8"),p=a("jITz"),O=a("fJrp"),j=a("lE29"),v=a("K7i0"),E=a("+oIK"),h=a("da4L"),w=a("Tr4L"),y=a("uDfI"),N=a("PjZB");a("Jrg8"),t.a=function RateConversation(e){var t=e.message,a=Object(w.a)().t,r=Object(j.a)(),l=r.activeColor,u=r.conversationRatingCloseButtonTheme,d=r.conversationRatingHeaderTheme,k=r.conversationRatingBodyTheme,C=r.composerTheme,T=Object(O.a)(t),S=Object(y.b)(),A=Object(y.c)(function(e){return e.session}).endUser,M=Object(m.useState)(!0),L=Object(n.a)(M,2),I=L[0],R=L[1],x=Object(m.useState)(""),_=Object(n.a)(x,2),P=_[0],B=_[1],F=Object(m.useState)(0),U=Object(n.a)(F,2),D=U[0],G=U[1],H=Object(m.useMemo)(function(){return Object(h.a)(t,"ratingPrompt")},[t]),z=H.ratingPromptMessage,V=H.ratingAcknowledgement,Q=Object(p.a)({targetKey:"Enter"}),Z=Object(m.useCallback)(function(){var e=Object(E.a)({message:"",activeConversation:t.conversationId,authorId:A.id,attributes:{conversationRating:{ratingPrompt:{ratingAcknowledgement:V,ratingPromptMessage:z.trim()},ratingValue:D,ratingText:P}},contentType:N.c.BOT_CONVERSATION_RATING,type:N.e.BOT_CONVERSATION_RATING});S(Object(v.m)({message:e})),R(!1)},[t,S,A.id,V,z,P,D]);Object(m.useEffect)(function(){Q&&function isValidMessage(e){return e&&e.trim().length>0}(P)&&Z()},[Q,P,Z]),Object(m.useEffect)(function(){T&&T!==t&&!I&&R(!0)},[t,T,I]);var J=Object(m.useMemo)(function(){return b.a.map(function(e){var t=e.emoji,a=e.value;return f.a.createElement(s.a,{className:c()("drift-widget-rate-conversation--rating",{"drift-widget-rate-conversation--rating--selected":a===D}),key:"rating_".concat(a),"aria-label":"rate ".concat(a),onClick:function onClick(){return G(a)}},t)})},[D]);if(!I)return null;return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"drift-widget-rate-conversation--cover"}),f.a.createElement("div",{className:"drift-widget-rate-conversation"},f.a.createElement(i.a,{style:d},f.a.createElement("span",null,z),f.a.createElement(s.a,{className:"drift-widget-rate-conversation--close-button","aria-label":"close rating",onClick:function onClick(){return R(!1)}},f.a.createElement(o.j,{width:20,height:20,fill:u.color}))),f.a.createElement("div",{className:"drift-widget-rate-conversation--body",style:k},f.a.createElement("div",{className:"drift-widget-rate-conversation--ratings"},J),!!D&&f.a.createElement("div",{className:"drift-widget-rate-conversation--composer"},f.a.createElement("div",{className:"drift-widget-rate-conversation--actions"},f.a.createElement(s.a,{className:"drift-widget-rate-conversation--send-button",onClick:Z},f.a.createElement(o.p,{color:"#".concat(l)}))),f.a.createElement(g,{"aria-label":"rating input",maxLength:4096,placeholder:a("form.placeholder.tellUsMore"),onValueChange:function onTextAreaValueChange(e){Q||B(e)},value:P,style:C})))))}},"t/7O":function(e,t,a){},vYbd:function(e,t,a){},vkRn:function(e,t,a){"use strict";var n=a("nJ3u"),r=a("O94r"),c=a.n(r),i=a("noex"),o=a("yEsl"),s=a("fw6E"),l=a("z24s"),u=a("hhdZ"),d=a("58kB"),m=a("6fy/"),f=a("SsZN"),g=a("Wjfv"),b=a("K7i0"),p=a("da4L"),O=a("LVcX"),j=a("i9gz"),v=a("ERkP"),E=a.n(v),h=a("Tr4L"),w=a("uDfI"),y=a("A5mO"),N=(a("JhcM"),function ConversationHistoryListItem(e){var t=e.conversation,a=void 0===t?{}:t,n=Object(s.a)().onToggleConversationHistory,r=Object(v.useRef)(null),N=Object(h.a)().t,k=Object(l.a)(r),C=Object(w.b)(),T=Object(m.a)(),S=Object(v.useMemo)(function(){return Object(O.a)(null,["conversation","id"],a)},[a]),A=Object(u.a)(S),M=Object(v.useMemo)(function(){return Object(O.a)(null,["authorId"],A)},[A]),L=Object(d.a)(M).recipient,I=Object(p.h)(A);if(Object(j.a)(A))return null;var R=A.createdAt,x=A.attributes,_=void 0===x?{}:x,P=Object(y.a)(R).isAfter(y.a.today())?Object(y.a)(R).unixFmt(N("dt.format.time.short")):Object(y.a)(R).unixFmt(N("dt.format.date.short")),B=I?T.name:L.name,F="Conversation with ".concat(L.name).concat(_.preview?" - ".concat(I?"You":"",': "').concat(_.preview,'"'):"",", ").concat(P," - Click to open");return E.a.createElement("li",{className:c()("drift-widget-conversation-list-item",{"keyboard-focused":k})},E.a.createElement("button",{onClick:function toggleConversation(e){return function(){e&&(n(!1),C(Object(g.a)()),C(Object(b.n)({conversationId:e})),Object(f.f)(e))}}(a.conversation.id),"aria-label":F,ref:r},I?E.a.createElement(o.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:T.avatar}):E.a.createElement(i.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:L.avatarUrl,id:M}),E.a.createElement("div",{className:"drift-widget-conversation-list-item-content"},E.a.createElement("h2",null,B),E.a.createElement("span",{className:"drift-widget-conversation-list-item-time"},P),E.a.createElement("p",{className:"drift-widget-conversation-list-item-last-message"},_.preview))))}),k=a("lE29"),C=a("DboL"),T=a("9xv8");a("PGb/"),t.a=function ConversationHistory(){var e=Object(s.a)().conversationHistoryOpen,t=Object(w.c)(function(e){return e.conversations.conversations}),a=Object(v.useMemo)(function(){return Object(T.c)(Object(C.a)(t),"updatedAt")},[t]),r=Object(v.useMemo)(function(){return E.a.createElement("ul",{className:"drift-widget-conversation-history-list"},a.map(function(e){return E.a.createElement(N,{key:e.conversation.id,conversation:e})}))},[a]),i=Object(k.a)().activeColor;return E.a.createElement("div",{className:c()("drift-widget-conversation-history",{"drift-widget-conversation-history--open":e}),"aria-hidden":!e},E.a.createElement("style",null,"\n          .drift-widget-conversation-list-item.keyboard-focused {\n            ".concat(Object(n.c)(i),"\n          }\n        ")),e&&r)}},yAze:function(e,t,a){},zoZM:function(e,t,a){}}]);